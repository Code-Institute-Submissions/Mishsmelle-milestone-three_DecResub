{% extends "base.html" %}
{% block content %}
<div class="review-hero">
    <button class="waves-effect waves-light btn" onclick="topFunction()" id="myBtn" title="Back to top"
        aria-label="Button takes back to top of page"><i class="fa-solid fa-angle-up"></i></button>
    <div class="row">
        <div class="col s12 m10 offset-m1 l8 offset-l2">
            <div class="card-panel z-depth-4 card-margin-top">
                <div class="col s12 m6 offset-m3">
                    <h3 class="review-header center-align">Read all User Reviews</h3>
                </div>
                <!-- if reviews found display them otherwise display No Results Found  -->
                <div class="row">
                    <ul class="collapsible">
                        {% for film in films %}
                        <li>
                            <div class="collapsible-header white-text blue-grey darken-4 text-shadow">
                                <i class="fas fa-caret-down"></i>
                                <img class="activator" src="{{ film.image_url }}" alt="default film image"
                                    style=max-width:50px; />
                                <strong>{{ film.film_title }}</strong>
                            </div>
                            <div class="collapsible-body">
                                <strong>Genre: </strong> {{ film.genre_name }}
                                <p>{{ film.review }}</p>
                                <p><em>by: {{ film.reviewed_by }}</em></p>
                                {% if session.user|lower == film.reviewed_by|lower %}
                                <a href="{{ url_for('delete_film', film_id=film._id)}}"
                                    class="btn-small green accent-4">Delete</a>
                                <a href="{{ url_for('edit_film', film_id=film._id)}}"
                                    class="btn-small light-blue lighten-1">Edit</a>
                                {% endif %}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    <!-- end of card title  -->
                </div>
            </div>
            <!-- end of review loop  -->
        </div>
    </div>
</div>

<script>
    // Floating button to click to go to top of review.html 
    // https: //www.w3schools.com/howto/howto_js_scroll_to_top.asp 
    //Get the button:
    mybutton = document.getElementById("myBtn");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }
</script>

{% endblock %}